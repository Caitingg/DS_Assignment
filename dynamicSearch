import java.sql.*;
import java.util.ArrayList;
import java.util.Scanner;

public class DynamicSearch {
    // Define your database URL, username, and password
    static final String DB_URL = "jdbc:mysql://localhost:3306/your_database";
    static final String USER = "your_username";
    static final String PASS = "your_password";

    public static void main(String[] args) {
        // Initialize player list
        ArrayList<Player> players = new ArrayList<>();

        // Get user input for search conditions
        Scanner scanner = new Scanner(System.in);
        System.out.print("Find attributes: ");
        String attributes = scanner.nextLine();

        // Perform dynamic search based on user input
        Player matchedPlayer = dynamicSearch(players, attributes);

        // Display search result
        if (matchedPlayer != null) {
            System.out.println("\nMatched Player:");
            System.out.println(matchedPlayer.toString());
        } else {
            System.out.println("\nNo players found matching the search criteria.");
        }
    }

    // Function for dynamic searching based on user-entered attributes
    public static Player dynamicSearch(ArrayList<Player> players, String attributes) {
        String[] searchCriteria = attributes.split(",");
        String attribute = "", condition = "";
        double value = 0;
        for (int i = 0; i < searchCriteria.length; i++) {
            if (i % 3 == 0) {
                attribute = searchCriteria[i];
            } else if (i % 3 == 1) {
                condition = searchCriteria[i];
            } else if (i % 3 == 2) {
                value = Double.parseDouble(searchCriteria[i]);
                // Connect to the database and fetch player data based on search criteria
                try (Connection conn = DriverManager.getConnection(DB_URL, USER, PASS);
                     Statement stmt = conn.createStatement()) {
                    String sql = "SELECT * FROM players WHERE " + attribute + " " + condition + " " + value;
                    ResultSet rs = stmt.executeQuery(sql);
                    while (rs.next()) {
                        String name = rs.getString("name");
                        int age = rs.getInt("age");
                        double height = rs.getDouble("height");
                        double weight = rs.getDouble("weight");
                        String position = rs.getString("position");
                        double salary = rs.getDouble("salary");
                        double points = rs.getDouble("points");
                        double rebounds = rs.getDouble("rebounds");
                        double assists = rs.getDouble("assists");
                        double steals = rs.getDouble("steals");
                        double blocks = rs.getDouble("blocks");
                        return new Player(name, age, height, weight, position, salary, points, rebounds, assists, steals, blocks);
                    }
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }
        return null;
    }
}
